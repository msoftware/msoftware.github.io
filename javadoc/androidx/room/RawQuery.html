<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_121) on Tue May 22 15:49:13 CEST 2018 -->
<title>RawQuery</title>
<meta name="date" content="2018-05-22">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="RawQuery";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../androidx/room/Query.html" title="annotation in androidx.room"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../androidx/room/Relation.html" title="annotation in androidx.room"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?androidx/room/RawQuery.html" target="_top">Frames</a></li>
<li><a href="RawQuery.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Required&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.optional.element.summary">Optional</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.element.detail">Element</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">androidx.room</div>
<h2 title="Annotation Type RawQuery" class="title">Annotation Type RawQuery</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>@Target(value=METHOD)
 @Retention(value=CLASS)
public @interface <span class="memberNameLabel">RawQuery</span></pre>
<div class="block">Marks a method in a <a href="../../androidx/room/Dao.html" title="annotation in androidx.room"><code>Dao</code></a> annotated class as a raw query method where you can pass the
 query as a <a href="../../androidx/sqlite/db/SupportSQLiteQuery.html" title="interface in androidx.sqlite.db"><code>SupportSQLiteQuery</code></a>.
 <pre>
  @Dao
 interface RawDao {
      @RawQuery
     User getUserViaQuery(SupportSQLiteQuery query);
 }
 SimpleSQLiteQuery query = new SimpleSQLiteQuery("SELECT * FROM User WHERE id = ? LIMIT 1",
         new Object[]{userId});
 User user2 = rawDao.getUserViaQuery(query);
 </pre>
 <p>
 Room will generate the code based on the return type of the function and failure to
 pass a proper query will result in a runtime failure or an undefined result.
 <p>
 If you know the query at compile time, you should always prefer <a href="../../androidx/room/Query.html" title="annotation in androidx.room"><code>Query</code></a> since it validates
 the query at compile time and also generates more efficient code since Room can compute the
 query result at compile time (e.g. it does not need to account for possibly missing columns in
 the response).
 <p>
 On the other hand, <code>RawQuery</code> serves as an escape hatch where you can build your own
 SQL query at runtime but still use Room to convert it into objects.
 <p>
 <code>RawQuery</code> methods must return a non-void type. If you want to execute a raw query that
 does not return any value, use <a href="../../androidx/room/RoomDatabase.html#query-java.lang.String-java.lang.Object:A-"><code>RoomDatabase#query</code></a> methods.
 <p>
 RawQuery methods can only be used for read queries. For write queries, use
 <a href="../../androidx/room/RoomDatabase.html#getOpenHelper--"><code>RoomDatabase.getOpenHelper().getWritableDatabase()</code></a>.
 <p>
 <b>Observable Queries:</b>
 <p>
 <code>RawQuery</code> methods can return observable types but you need to specify which tables are
 accessed in the query using the <a href="../../androidx/room/RawQuery.html#observedEntities--"><code>observedEntities()</code></a> field in the annotation.
 <pre>
  @Dao
 interface RawDao {
      @RawQuery(observedEntities = User.class)
     LiveData&lt;List&lt;User>> getUsers(SupportSQLiteQuery query);
 }
 LiveData&lt;List&lt;User>> liveUsers = rawDao.getUsers(
     new SimpleSQLiteQuery("SELECT * FROM User ORDER BY name DESC"));
 </pre>
 <b>Returning Pojos:</b>
 <p>
 RawQueries can also return plain old java objects, similar to <a href="../../androidx/room/Query.html" title="annotation in androidx.room"><code>Query</code></a> methods.
 <pre>
 public class NameAndLastName {
     public final String name;
     public final String lastName;

     public NameAndLastName(String name, String lastName) {
         this.name = name;
         this.lastName = lastName;
     }
 }

  @Dao
 interface RawDao {
      @RawQuery
     NameAndLastName getNameAndLastName(SupportSQLiteQuery query);
 }
 NameAndLastName result = rawDao.getNameAndLastName(
      new SimpleSQLiteQuery("SELECT * FROM User WHERE id = ?", new Object[]{userId}))
 // or
 NameAndLastName result = rawDao.getNameAndLastName(
      new SimpleSQLiteQuery("SELECT name, lastName FROM User WHERE id = ?",
          new Object[]{userId})))
 </pre>
 <p>
 <b>Pojos with Embedded Fields:</b>
 <p>
 <code>RawQuery</code> methods can return pojos that include <a href="../../androidx/room/Embedded.html" title="annotation in androidx.room"><code>Embedded</code></a> fields as well.
 <pre>
 public class UserAndPet {
      @Embedded
     public User user;
      @Embedded
     public Pet pet;
 }

  @Dao
 interface RawDao {
      @RawQuery
     UserAndPet getUserAndPet(SupportSQLiteQuery query);
 }
 UserAndPet received = rawDao.getUserAndPet(
         new SimpleSQLiteQuery("SELECT * FROM User, Pet WHERE User.id = Pet.userId LIMIT 1"))
 </pre>

 <b>Relations:</b>
 <p>
 <code>RawQuery</code> return types can also be objects with <a href="../../androidx/room/Relation.html" title="annotation in androidx.room"><code>Relations</code></a>.
 <pre>
 public class UserAndAllPets {
      @Embedded
     public User user;
      @Relation(parentColumn = "id", entityColumn = "userId")
     public List&lt;Pet> pets;
 }

  @Dao
 interface RawDao {
      @RawQuery
     List&lt;UserAndAllPets> getUsersAndAllPets(SupportSQLiteQuery query);
 }
 List&lt;UserAndAllPets> result = rawDao.getUsersAndAllPets(
      new SimpleSQLiteQuery("SELECT * FROM users"));
 </pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== ANNOTATION TYPE OPTIONAL MEMBER SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="annotation.type.optional.element.summary">
<!--   -->
</a>
<h3>Optional Element Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Optional Element Summary table, listing optional elements, and an explanation">
<caption><span>Optional Elements</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Optional Element and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.Class[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../androidx/room/RawQuery.html#observedEntities--">observedEntities</a></span></code>
<div class="block">Denotes the list of entities which are accessed in the provided query and should be observed
 for invalidation if the query is observable.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ ANNOTATION TYPE MEMBER DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="annotation.type.element.detail">
<!--   -->
</a>
<h3>Element Detail</h3>
<a name="observedEntities--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>observedEntities</h4>
<pre>public abstract&nbsp;java.lang.Class[]&nbsp;observedEntities</pre>
<div class="block">Denotes the list of entities which are accessed in the provided query and should be observed
 for invalidation if the query is observable.
 <p>
 The listed classes should either be annotated with <a href="../../androidx/room/Entity.html" title="annotation in androidx.room"><code>Entity</code></a> or they should reference to
 at least 1 Entity (via <a href="../../androidx/room/Embedded.html" title="annotation in androidx.room"><code>Embedded</code></a> or <a href="../../androidx/room/Relation.html" title="annotation in androidx.room"><code>Relation</code></a>).
 <p>
 Providing this field in a non-observable query has no impact.
 <pre>
  @Dao
 interface RawDao {
      @RawQuery(observedEntities = User.class)
     LiveData&lt;List&lt;User>> getUsers(String query);
 }
 LiveData&lt;List&lt;User>> liveUsers = rawDao.getUsers("select * from User ORDER BY name
 DESC");
 </pre></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>List of entities that should invalidate the query if changed.</dd>
</dl>
<dl>
<dt>Default:</dt>
<dd>{}</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../androidx/room/Query.html" title="annotation in androidx.room"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../androidx/room/Relation.html" title="annotation in androidx.room"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?androidx/room/RawQuery.html" target="_top">Frames</a></li>
<li><a href="RawQuery.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Required&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.optional.element.summary">Optional</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.element.detail">Element</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Generated javadoc for the new package structure to make it clearer which packages are bundled with the Android operating system, and which are packaged with your app's APK. Going forward, the android.* package hierarchy will be reserved for Android packages that ship with the operating system; other packages will be issued in the new <a htef='http://androidx.de/'>androidx</a>.* package hiearchy.</small></p>
</body>
</html>
