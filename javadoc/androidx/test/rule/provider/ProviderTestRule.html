<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_121) on Tue May 22 14:34:36 CEST 2018 -->
<title>ProviderTestRule</title>
<meta name="date" content="2018-05-22">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ProviderTestRule";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../androidx/test/rule/provider/ProviderTestRule.Builder.html" title="class in androidx.test.rule.provider"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?androidx/test/rule/provider/ProviderTestRule.html" target="_top">Frames</a></li>
<li><a href="ProviderTestRule.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">androidx.test.rule.provider</div>
<h2 title="Class ProviderTestRule" class="title">Class ProviderTestRule</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>androidx.test.rule.provider.ProviderTestRule</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">ProviderTestRule</span>
extends java.lang.Object</pre>
<div class="block">A <code>TestRule</code> to test <code>ContentProvider</code>s, with additional APIs to enable easy
 initialization such as restoring database from a file, running database commands passed in as a
 String or a file. By default, all permissions are granted when they are checked in
 ContentProviders under test, method <a href="../../../../androidx/test/rule/provider/ProviderTestRule.html#revokePermission-java.lang.String-"><code>revokePermission(java.lang.String)</code></a> can be used to revoke specific
 permissions to test the cases when they are denied in ContentProviders.

 <p>Note: The database related methods <a href="../../../../androidx/test/rule/provider/ProviderTestRule.Builder.html#setDatabaseFile-java.lang.String-java.io.File-"><code>ProviderTestRule.Builder.setDatabaseFile(java.lang.String, java.io.File)</code></a>, <a href="../../../../androidx/test/rule/provider/ProviderTestRule.Builder.html#setDatabaseCommands-java.lang.String-java.lang.String...-"><code>ProviderTestRule.Builder.setDatabaseCommands(java.lang.String, java.lang.String...)</code></a>, <a href="../../../../androidx/test/rule/provider/ProviderTestRule.Builder.html#setDatabaseCommandsFile-java.lang.String-java.io.File-"><code>ProviderTestRule.Builder.setDatabaseCommandsFile(java.lang.String, java.io.File)</code></a> and <a href="../../../../androidx/test/rule/provider/ProviderTestRule.html#runDatabaseCommands-java.lang.String-java.lang.String...-"><code>runDatabaseCommands(java.lang.String, java.lang.String...)</code></a> should only be used when ContentProvider under test is implemented based on
 <code>SQLiteDatabase</code>.

 <p>If more than one database related methods are used for a ContentProvider under test, the
 execution order of restoring database from file and running database commands are independent of
 the order those methods are called. If all methods are used, when setting up the ContentProvider
 for test, the execution order is as follows:

 <ol>
   <li>Restore database from file passed in via <a href="../../../../androidx/test/rule/provider/ProviderTestRule.Builder.html#setDatabaseFile-java.lang.String-java.io.File-"><code>ProviderTestRule.Builder.setDatabaseFile(java.lang.String, java.io.File)</code></a>
   <li>Run database commands passed in via <a href="../../../../androidx/test/rule/provider/ProviderTestRule.Builder.html#setDatabaseCommands-java.lang.String-java.lang.String...-"><code>ProviderTestRule.Builder.setDatabaseCommands(java.lang.String, java.lang.String...)</code></a>
   <li>Run database commands from file passed in via <a href="../../../../androidx/test/rule/provider/ProviderTestRule.Builder.html#setDatabaseCommandsFile-java.lang.String-java.io.File-"><code>ProviderTestRule.Builder.setDatabaseCommandsFile(java.lang.String, java.io.File)</code></a>
 </ol>

 <p>If the <code>ContentProvider</code> under test is not implemented based on <code>SQLiteDatabase</code>,
 or is implemented based on <code>SQLiteDatabase</code> but no extra database initialization workloads
 are needed, the rule can be created by simply using <a href="../../../../androidx/test/rule/provider/ProviderTestRule.Builder.html" title="class in androidx.test.rule.provider"><code>Builder(Class,String)</code></a>.

 <p>Usage example:

 <pre>
 &#064;Rule
 public ProviderTestRule mProviderRule =
     new ProviderTestRule.Builder(MyContentProvider.class, MyContentProvider.AUTHORITY).build();

 &#064;Test
 public void verifyContentProviderContractWorks() {
     ContentResolver resolver = mProviderRule.getResolver();
     // perform some database (or other) operations
     Uri uri = resolver.insert(testUrl, testContentValues);
     // perform some assertions on the resulting URI
     assertNotNull(uri);
 }
 </pre>

 <p>Alternatively, if the <code>ContentProvider</code> under test is based on <code>SQLiteDatabase</code>,
 then all database related methods can be used. However, the database name argument passed in via
 these methods must match the actual database name used by the <code>ContentProvider</code> under test.

 <p>Usage example:

 <pre>
 &#064;Rule
 public ProviderTestRule mProviderRule =
     new ProviderTestRule.Builder(MyContentProvider.class, MyContentProvider.AUTHORITY)
         .setDatabaseCommands(DATABASE_NAME, INSERT_ONE_ENTRY_CMD, INSERT_ANOTHER_ENTRY_CMD)
         .build();

 &#064;Test
 public void verifyTwoEntriesInserted() {
     ContentResolver mResolver = mProviderRule.getResolver();
     // two entries are already inserted by rule, we can directly perform assertions to verify
     Cursor c = null;
     try {
       c = mResolver.query(URI_TO_QUERY_ALL, null, null, null, null);
       assertNotNull(c);
       assertEquals(2, c.getCount());
     } finally {
       if (c != null && !c.isClosed()) {
         c.close();
       }
     }
 }
 </pre>

 <p><b>This API is currently in beta.</b></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../androidx/test/rule/provider/ProviderTestRule.Builder.html" title="class in androidx.test.rule.provider">ProviderTestRule.Builder</a></span></code>
<div class="block">A Builder to ease <a href="../../../../androidx/test/rule/provider/ProviderTestRule.html" title="class in androidx.test.rule.provider"><code>ProviderTestRule</code></a> creation.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../androidx/test/rule/provider/ProviderTestRule.html#afterProviderCleanedUp--">afterProviderCleanedUp</a></span>()</code>
<div class="block">Override this method to execute any code that should run after provider is cleaned up.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>Statement</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../androidx/test/rule/provider/ProviderTestRule.html#apply-Statement-Description-">apply</a></span>(Statement&nbsp;base,
     Description&nbsp;description)</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../androidx/test/rule/provider/ProviderTestRule.html#beforeProviderSetup--">beforeProviderSetup</a></span>()</code>
<div class="block">Override this method to execute any code that should run before provider is set up.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>ContentResolver</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../androidx/test/rule/provider/ProviderTestRule.html#getResolver--">getResolver</a></span>()</code>
<div class="block">Get the isolated <code>ContentResolver</code> that should be used for testing of the
 ContentProviders.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../androidx/test/rule/provider/ProviderTestRule.html#revokePermission-java.lang.String-">revokePermission</a></span>(java.lang.String&nbsp;permission)</code>
<div class="block">Revoke permission anytime during the tests.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../androidx/test/rule/provider/ProviderTestRule.html#runDatabaseCommands-java.lang.String-java.lang.String...-">runDatabaseCommands</a></span>(java.lang.String&nbsp;dbName,
                   java.lang.String...&nbsp;dbCmds)</code>
<div class="block">Run database commands anytime during the tests, after the rule is created.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getResolver--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getResolver</h4>
<pre>public&nbsp;ContentResolver&nbsp;getResolver()</pre>
<div class="block">Get the isolated <code>ContentResolver</code> that should be used for testing of the
 ContentProviders.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the isolated <code>ContentResolver</code> created by this <code>ProviderTestRule</code>.</dd>
</dl>
</li>
</ul>
<a name="apply-Statement-Description-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>apply</h4>
<pre>public&nbsp;Statement&nbsp;apply(Statement&nbsp;base,
                       Description&nbsp;description)</pre>
</li>
</ul>
<a name="runDatabaseCommands-java.lang.String-java.lang.String...-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>runDatabaseCommands</h4>
<pre>public&nbsp;void&nbsp;runDatabaseCommands(java.lang.String&nbsp;dbName,
                                java.lang.String...&nbsp;dbCmds)</pre>
<div class="block">Run database commands anytime during the tests, after the rule is created.

 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dbName</code> - The name of the underlying database used by the ContentProvider under test.</dd>
<dd><code>dbCmds</code> - The SQL commands to run during tests. Each command will be passed to <code>SQLiteDatabase#execSQL(String)</code> to execute.</dd>
</dl>
</li>
</ul>
<a name="revokePermission-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>revokePermission</h4>
<pre>public&nbsp;void&nbsp;revokePermission(java.lang.String&nbsp;permission)</pre>
<div class="block">Revoke permission anytime during the tests. The default return value of the following methods
 is <code>PackageManager.PERMISSION_GRANTED</code>. After a specific permission is revoked, the value
 returned becomes <code>PackageManager.PERMISSION_DENIED</code> when calling the methods with the
 revoked permission. After a test, the return values are restored to <code>PackageManager.PERMISSION_GRANTED</code>.

 <ul>
   <li><code>Context#checkPermission</code>
   <li><code>Context#checkCallingPermission</code>
   <li><code>Context#checkSelfPermission</code>
   <li><code>Context#checkCallingOrSelfPermission</code>
 </ul>

 Consequentially, calling the following methods with the revoked permission will throw a <code>SecurityException</code>.

 <ul>
   <li><code>Context#enforcePermission</code>
   <li><code>Context#enforceCallingPermission</code>
   <li><code>Context#enforceCallingOrSelfPermission</code>
 </ul></div>
</li>
</ul>
<a name="beforeProviderSetup--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>beforeProviderSetup</h4>
<pre>protected&nbsp;void&nbsp;beforeProviderSetup()</pre>
<div class="block">Override this method to execute any code that should run before provider is set up. This method
 is called before each test method, including any method annotated with <a
 href="http://junit.source.net/javadoc/org/junit/Before.html"><code>Before</code></a>.</div>
</li>
</ul>
<a name="afterProviderCleanedUp--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>afterProviderCleanedUp</h4>
<pre>protected&nbsp;void&nbsp;afterProviderCleanedUp()</pre>
<div class="block">Override this method to execute any code that should run after provider is cleaned up. This
 method is called after each test method, including any method annotated with <a
 href="http://junit.source.net/javadoc/org/junit/After.html"><code>After</code></a>.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../androidx/test/rule/provider/ProviderTestRule.Builder.html" title="class in androidx.test.rule.provider"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?androidx/test/rule/provider/ProviderTestRule.html" target="_top">Frames</a></li>
<li><a href="ProviderTestRule.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
